<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Examen Final Penal</title>
    <style>
        body { font-family: 'Times New Roman', serif; background: #e5e5e5; padding: 10px; display: flex; justify-content: center; }
        .exam-card { background: white; width: 100%; max-width: 600px; padding: 25px; border: 2px solid #2c3e50; box-shadow: 5px 5px 15px rgba(0,0,0,0.2); }
        .header { text-align: center; border-bottom: 2px solid #2c3e50; margin-bottom: 15px; }
        .q-text { font-size: 1.2rem; font-weight: bold; margin: 20px 0; color: #1a252f; }
        .opt { display: block; width: 100%; padding: 15px; margin-bottom: 10px; border: 1px solid #333; background: #fff; cursor: pointer; text-align: left; font-size: 1rem; }
        .correct { background: #d4edda !important; border-color: #28a745 !important; }
        .wrong { background: #f8d7da !important; border-color: #dc3545 !important; }
        .btn-next { display: none; width: 100%; padding: 15px; background: #2c3e50; color: white; border: none; font-weight: bold; cursor: pointer; }
        .result-img { max-width: 100%; height: auto; margin-top: 15px; border: 4px solid white; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    </style>
</head>
<body>

<div class="exam-card" id="main">
    <div id="game">
        <div class="header">
            <h2 style="margin:5px;">EXAMEN PENAL ESPECIAL</h2>
            <p id="stats" style="font-size:0.9rem; color:#666;">Cargando sistema...</p>
        </div>
        <div id="unit" style="color: #c5a059; font-weight: bold; font-size: 0.8rem;"></div>
        <div class="q-text" id="question"></div>
        <div id="options-box"></div>
        <button class="btn-next" id="btn-next" onclick="nextQ()">SIGUIENTE PREGUNTA</button>
    </div>
</div>

<script>
    // VERIFICAR NOMBRES AQUÍ
    const IMG_GANO = "ganaste.jpg"; 
    const IMG_PERDO = "perdiste.jpg";

    const preguntas = [
        { u: "UNIDAD I", q: "Pena del Homicidio Simple (Art. 79):", a: "8 a 25 años de reclusión o prisión", o: ["8 a 25 años de reclusión o prisión", "8 a 25 años de prisión", "1 a 6 años", "Prisión perpetua"] },
        { u: "UNIDAD II", q: "Pena de las Lesiones Gravísimas (Art. 91):", a: "3 a 10 años de reclusión o prisión", o: ["3 a 10 años de reclusión o prisión", "1 a 6 años", "5 a 15 años", "1 a 3 años"] },
        { u: "UNIDAD IV", q: "Abuso Sexual con Acceso Carnal (Art. 119 3er p):", a: "6 a 15 años de reclusión o prisión", o: ["6 a 15 años de reclusión o prisión", "8 a 20 años", "4 a 10 años", "10 a 25 años"] },
        { u: "UNIDAD VI", q: "Extorsión Simple (Art. 168):", a: "5 a 10 años de reclusión o prisión", o: ["5 a 10 años de reclusión o prisión", "3 a 8 años", "4 a 10 años", "1 mes a 6 años"] },
        { u: "UNIDAD XI", q: "Cohecho Financiero (Art. 312):", a: "Prisión de 1 a 6 años y multa de 2 a 5 veces el beneficio", o: ["Prisión de 1 a 6 años y multa de 2 a 5 veces el beneficio", "Prisión de 2 a 8 años", "Multa de $30.000", "Inhabilitación"] }
    ];

    let current = 0; let score = 0;
    let pool = preguntas.sort(() => Math.random() - 0.5);

    function start() {
        const d = pool[current];
        document.getElementById("stats").innerText = `Pregunta ${current + 1}/${pool.length} | Aciertos: ${score}`;
        document.getElementById("unit").innerText = d.u;
        document.getElementById("question").innerText = d.q;
        const box = document.getElementById("options-box");
        box.innerHTML = "";
        document.getElementById("btn-next").style.display = "none";

        [...d.o].sort(() => Math.random() - 0.5).forEach(t => {
            const b = document.createElement("button");
            b.className = "opt";
            b.innerText = t;
            b.onclick = () => {
                const btns = document.querySelectorAll(".opt");
                btns.forEach(btn => btn.style.pointerEvents = "none");
                if(t === d.a) { b.classList.add("correct"); score++; }
                else { b.classList.add("wrong"); }
                btns.forEach(btn => { if(btn.innerText === d.a) btn.classList.add("correct"); });
                document.getElementById("btn-next").style.display = "block";
            };
            box.appendChild(b);
        });
    }

    function nextQ() {
        current++;
        if(current < pool.length) start();
        else {
            const nota = (score / pool.length) * 10;
            const paso = nota >= 7;
            document.getElementById("main").innerHTML = `
                <div style="text-align:center">
                    <h1>NOTA: ${nota.toFixed(1)}</h1>
                    <h2>${paso ? '¡APROBADO!' : 'REPROBADO'}</h2>
                    <img src="${paso ? IMG_GANO : IMG_PERDO}" class="result-img" onerror="this.style.display='none'; alert('No se encontró la foto: ' + this.src.split('/').pop())">
                    <br><br>
                    <button class="opt" style="text-align:center" onclick="location.reload()">REINTENTAR</button>
                </div>`;
        }
    }

    // Iniciar manualmente para evitar el bloqueo de "preparando acta"
    window.onload = start;
</script>

</body>
</html>
