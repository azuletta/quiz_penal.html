<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Examen Final Integral - Penal Especial</title>
    <style>
        :root { --legal-blue: #2c3e50; --law-gold: #c5a059; --bg: #fdfdfd; }
        body { font-family: 'Georgia', serif; background: #e5e5e5; display: flex; justify-content: center; padding: 20px; }
        .folder { background: white; width: 100%; max-width: 750px; padding: 40px; border: 1px solid #aaa; box-shadow: 10px 10px 0px rgba(0,0,0,0.1); }
        .header { border-bottom: 2px solid var(--legal-blue); text-align: center; margin-bottom: 20px; }
        .unit-tag { font-weight: bold; color: var(--law-gold); text-transform: uppercase; font-size: 0.85rem; }
        .question { font-size: 1.3rem; margin: 25px 0; color: #222; min-height: 80px; }
        .options { display: grid; gap: 12px; }
        .opt-btn { padding: 15px; border: 1px solid #ccc; background: #fff; cursor: pointer; text-align: left; font-size: 1rem; transition: 0.2s; font-family: inherit; }
        .opt-btn:hover { background: #f0f0f0; border-color: var(--legal-blue); }
        .correct { background: #d4edda !important; border-color: #28a745 !important; font-weight: bold; }
        .wrong { background: #f8d7da !important; border-color: #dc3545 !important; }
        .next-btn { display: none; margin-top: 30px; width: 100%; padding: 18px; background: var(--legal-blue); color: white; border: none; cursor: pointer; font-size: 1.1rem; }
        .final-screen { text-align: center; }
        .result-img { max-width: 400px; width: 100%; height: auto; margin: 20px 0; border: 5px solid white; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        .score { font-size: 4rem; font-weight: bold; margin: 0; }
    </style>
</head>
<body>

<div class="folder" id="quiz-container">
    <div id="game-ui">
        <div class="header">
            <h1 style="margin-bottom: 5px;">Mesa de Examen Final</h1>
            <p id="progress" style="margin-top: 0; color: #666;"></p>
        </div>
        <div class="unit-tag" id="unit-name"></div>
        <div class="question" id="question-text"></div>
        <div class="options" id="options-grid"></div>
        <button class="next-btn" id="next-btn" onclick="nextQuestion()">Siguiente Pregunta →</button>
    </div>
</div>

<script>
    // --- CONFIGURACIÓN DE IMÁGENES ---
    // Si tus fotos tienen otro nombre o extensión (como .png), cambialas acá:
    const FOTO_GANO = "ganaste.jpg"; 
    const FOTO_PERDIO = "perdiste.jpg";
    // --------------------------------

    const bancoCompleto = [
        { u: "Unidad I: Vida", q: "¿Pena para el Homicidio Simple?", a: "8 a 25 años de reclusión o prisión", o: ["8 a 25 años de reclusión o prisión", "8 a 25 años de prisión", "10 a 25 años de reclusión", "5 a 15 años de prisión"] },
        { u: "Unidad I: Vida", q: "Homicidio en Emoción Violenta (Art. 81, 1a):", a: "Reclusión de 3 a 6 años o prisión de 1 a 3 años", o: ["Reclusión de 3 a 6 años o prisión de 1 a 3 años", "Prisión de 3 a 6 años o reclusión de 1 a 3 años", "1 a 5 años de prisión", "Prisión perpetua"] },
        { u: "Unidad II: Lesiones", q: "Pena de las Lesiones Gravísimas (Art. 91):", a: "3 a 10 años de reclusión o prisión", o: ["3 a 10 años de reclusión o prisión", "1 a 6 años de reclusión o prisión", "5 a 15 años", "2 a 8 años"] },
        { u: "Unidad IV: Integridad Sexual", q: "Abuso Sexual con Acceso Carnal (Art. 119 3er p.):", a: "6 a 15 años de reclusión o prisión", o: ["6 a 15 años de reclusión o prisión", "8 a 20 años", "4 a 10 años", "10 a 25 años"] },
        { u: "Unidad VI: Propiedad", q: "Pena de la Extorsión Simple (Art. 168):", a: "5 a 10 años de reclusión o prisión", o: ["5 a 10 años de reclusión o prisión", "3 a 8 años", "4 a 10 años de prisión", "8 a 20 años"] },
        { u: "Unidad VI: Propiedad", q: "Estafa Genérica (Art. 172):", a: "1 mes a 6 años de prisión", o: ["1 mes a 6 años de prisión", "6 meses a 4 años", "1 a 3 años de prisión", "2 a 8 años"] },
        { u: "Unidad X: Fe Pública", q: "Falsificación de Documento Público (Art. 292):", a: "1 a 6 años de prisión", o: ["1 a 6 años de prisión", "2 a 8 años", "6 meses a 4 años", "1 a 4 años"] },
        { u: "Unidad XI: Orden Económico", q: "Cohecho Financiero (Art. 312):", a: "Prisión de 1 a 6 años y multa", o: ["Prisión de 1 a 6 años y multa", "Prisión de 2 a 8 años", "Multa e inhabilitación", "Prisión de 3 a 10 años"] },
        { u: "Unidad I: Vida", q: "Homicidio Preterintencional (Art. 81, 1b):", a: "Reclusión de 3 a 6 años o prisión de 1 a 3 años", o: ["Reclusión de 3 a 6 años o prisión de 1 a 3 años", "Reclusión de 1 a 3 años o prisión de 3 a 6 años", "Prisión de 2 a 5 años", "Prisión de 1 a 6 años"] },
        { u: "Unidad VI: Propiedad", q: "Pena del Robo Simple (Art. 164):", a: "1 mes a 6 años de prisión", o: ["1 mes a 6 años de prisión", "1 a 6 años", "2 a 8 años", "6 meses a 4 años"] }
    ];

    let actual = 0;
    let aciertos = 0;
    let preguntas = bancoCompleto.sort(() => Math.random() - 0.5); // Aleatoriedad total

    function cargar() {
        const d = preguntas[actual];
        document.getElementById("progress").innerText = `Pregunta ${actual + 1} de ${preguntas.length} | Aciertos: ${aciertos}`;
        document.getElementById("unit-name").innerText = d.u;
        document.getElementById("question-text").innerText = d.q;
        document.getElementById("next-btn").style.display = "none";
        
        const grid = document.getElementById("options-grid");
        grid.innerHTML = "";
        
        [...d.o].sort(() => Math.random() - 0.5).forEach(txt => {
            const b = document.createElement("button");
            b.className = "opt-btn";
            b.innerText = txt;
            b.onclick = () => validar(b, txt, d.a);
            grid.appendChild(b);
        });
    }

    function validar(btn, sel, cor) {
        const todos = document.querySelectorAll(".opt-btn");
        todos.forEach(b => b.style.pointerEvents = "none");
        if(sel === cor) {
            btn.classList.add("correct");
            aciertos++;
        } else {
            btn.classList.add("wrong");
            todos.forEach(b => { if(b.innerText === cor) b.classList.add("correct"); });
        }
        document.getElementById("next-btn").style.display = "block";
    }

    function nextQuestion() {
        actual++;
        if(actual < preguntas.length) cargar();
        else finalizar();
    }

    function finalizar() {
        const nota = (aciertos / preguntas.length) * 10;
        const gano = nota >= 7;
        const contenedor = document.getElementById("quiz-container");
        
        contenedor.innerHTML = `
            <div class="final-screen">
                <h2>ACTA DE EXAMEN</h2>
                <p class="score" style="color: ${gano ? '#28a745' : '#dc3545'}">${nota.toFixed(1)}</p>
                <h3>${gano ? "¡ESTÁ APROBADO!" : "EXAMEN INSUFICIENTE"}</h3>
                <img src="${gano ? FOTO_GANO : FOTO_PERDIO}" class="result-img" alt="Resultado Final">
                <br>
                <button class="next-btn" style="display:block" onclick="location.reload()">Rendir otra vez</button>
            </div>
        `;
    }

    cargar();
</script>
</body>
</html>
